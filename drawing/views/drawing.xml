<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <!--tree view of the project model -->
        <record id="drawing_tree" model="ir.ui.view">
            <field name="name">construction.drawing.tree</field>
            <field name="model">construction.drawing</field>
            <field name="arch" type="xml">
                <tree string="Drawings">
                    <field name="name_seq"/>
                    <field name="project_id"/>
                    <field name="total_drawing" sum="tot_draw" widget="monetary"/>
                    <field name="state"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>

        <record id="item_number_kanban" model="ir.ui.view">
            <field name="name">item.number.kanban</field>
            <field name="model">item.number</field>
            <field name="arch" type="xml">
                <kanban default_group_by="stage_id">
                    <field name="title"/>
                    <field name="Quantity"/>
                    <!--field name="Volume"/-->
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_hospital_patient_kanban">
                                <!--t t-if="record.image.raw_value">
                                    <div class="o_kanban_image_fill_left d-none d-md-block"
                                         t-attf-style="background-image:url('#{kanban_image('item.number', 'image', record.id.raw_value)}')"/>
                                </t>
                                <t t-else="">
                                    <img class="o_kanban_image" alt="Avatar" t-att-src='_s + "/base/static/img/avatar.png"'/>
                                </t-->
                                <div class="oe_kanban_details">
                                    <strong class="o_kanban_record_title"><field name="title"/></strong>
                                    <div class="o_kanban_tags_section"/>
                                    <ul>
                                        <li>Item : <field name="title"/></li>
                                        <li>Qty : <field name="Quantity"/></li>
                                        <!--li>Volume : <field name="Volume"/></li-->
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <!--form view of the project model -->
        <record id="drawing_form" model="ir.ui.view">
            <field name="name">construction.drawing.form</field>
            <field name="model">construction.drawing</field>
            <field name="arch" type="xml">
                <form string="drawings">
                    <header>
                        <button name="send_mail_template" string="Send BOQ" type="object" class="btn-primary"/>
                        <button name="print_quotation" string="Generate BOQ" type="object" class="btn-primary"/>
                        <button name="confirm_drawing" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('state', 'in', ['department_approval','ir_approve','approved','cancel'])]}" groups="base.group_user"/>
                        <button name="action_cancel" type="object" string="Cancel" attrs="{'invisible': [('state', 'in', ['department_approval','ir_approve','approved','cancel'])]}" groups="base.group_user"/>
                        <button name="department_approve" type="object" string="Department Approve" attrs="{'invisible': [('state', 'in', ['new','ir_approve','approved','cancel'])]}" groups="estimation.group_estimation_department_manager"/>
                        <button name="action_reject" type="object" string="Reject" attrs="{'invisible': [('state', 'in', ['new','approved','cancel'])]}" groups="estimation.group_estimation_department_manager,estimation.group_estimation_user"/>
                        <button name="action_approve" type="object" string="Approve" attrs="{'invisible': [('state', 'in', ['new','department_approval','po_created','cancel','approved'])]}" groups="estimation.group_estimation_user"/>
                        <button name="action_reset_draft" type="object" string="Reset To Draft" attrs="{'invisible': [('state', 'in', ['new','department_approval','ir_approve','approved'])]}"/>
                        <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" type="object" confirm="(Un)archiving an estimation automatically. Do you want to proceed?" class="oe_stat_button" icon="fa-archive">
                                <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>
                            </button>
                        </div>
                        <div class="oe_title">
                            <h1>
                                <field name="name_seq" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="project_id" readonly="1"/>
                                <field name="pricing_id" />
                                <field name="Division"/>
                                <field name="Building"/>
                            </group>
                            <group>
                                <field name="create_date"/>
                                <field name="close_date"/>
                                <field name="create_by_id"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Item List">
                                <field name="item_ids" widget="one2many_list" >
                                    <tree editable="bottom">
                                        <field name="title"/>
                                        <field name="pricing_id"/>
                                        <field name="Width"/>
                                        <field name="Length"/>
                                        <field name="Height"/>
                                        <field name="Thick"/>
                                        <field name="Volume" readonly="1" sum="Total"/>
                                        <field name="Quantity"/>
                                        <field name="UR_production" widget="monetary" invisible="1"/>
                                        <field name="Unit_Production" widget="monetary"/>
                                        <field name="Amount_prod" widget="monetary"
                                               sum="tot_pro"/>
                                        <field name="UR_delivery" widget="monetary" invisible="1"/>
                                        <field name="Unit_Delivery" widget="monetary"/>
                                        <field name="Amount_deli" widget="monetary"
                                               sum="tot_del"/>
                                        <field name="UR_erection" widget="monetary" invisible="1"/>
                                        <field name="Unit_Erection" widget="monetary"/>
                                        <field name="Amount_erec" widget="monetary"
                                               sum="tot_ere" />
                                        <field name="UR_total" widget="monetary" invisible="1"/>
                                        <field name="Amount_total" widget="monetary"
                                               sum="amount_total" />
                                        <field name="currency_id" invisible="1" />
                                        <button name="open_bom" string="Add Item Codes" type="object"/>
                                    </tree>
                                </field>
                                <group class="oe_subtotal_footer oe_right" colspan="2"
									    name="total_drawing">
									<field name="total_drawing" widget="monetary" />
                                    <field name="currency_id" invisible="1" />
								</group>
                            </page>
                            <page string="Other Information">
                                <group>
                                    <group>
                                        <field name="confirmed_by_id" readonly="1"/>
                                        <field name="department_manager_id" readonly="1"/>
                                        <field name="approved_by_id" readonly="1"/>
                                        <field name="rejected_by" readonly="1"/>
                                    </group>
                                    <group>
                                        <field name="confirmed_date"/>
                                        <field name="department_approval_date"/>
                                        <field name="approved_date"/>
                                        <field name="rejected_date"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--tree view of the item code -->
        <record id="code_tree" model="ir.ui.view">
            <field name="name">item.code.tree</field>
            <field name="model">item.code</field>
            <field name="arch" type="xml">
                <tree string="Drawings">
                    <field name="item_id"/>
                    <field name="title"/>
                    <field name="Type"/>
                    <field name="Type_of_finish"/>
                    <field name="Width"/>
                    <field name="Length"/>
                    <field name="Height"/>
                    <field name="Thick"/>
                    <field name="Quantity"/>
                    <field name="Unit"/>
                </tree>
            </field>
        </record>

        <record id="number_tree" model="ir.ui.view">
            <field name="name">item.number.tree</field>
            <field name="model">item.number</field>
            <field name="arch" type="xml">
                <tree string="Items">
                    <field name="title"/>
                    <field name="Type"/>
                    <field name="Type_of_finish"/>
                    <field name="Width"/>
                    <field name="Length"/>
                    <field name="Height"/>
                    <field name="Thick"/>
                    <field name="Quantity"/>
                    <field name="Unit"/>
                </tree>
            </field>
        </record>

        <!--form view of the item code -->
        <record id="number_form" model="ir.ui.view">
            <field name="name">item.number.form</field>
            <field name="model">item.code</field>
            <field name="arch" type="xml">
                <form string="BOM">
                    <sheet>
                        <group>
                            <field name="item_id" readonly="1"/>
                            <field name="title"/>
                            <field name="Type"/>
                            <field name="Type_of_finish"/>
                            <field name="Width"/>
                            <field name="Length"/>
                            <field name="Height"/>
                            <field name="Thick"/>
                            <field name="Quantity"/>
                            <field name="Unit"/>
                            <!--field name="Volume"/-->
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--form view of the item code -->
        <record id="code_form" model="ir.ui.view">
            <field name="name">item.code.form</field>
            <field name="model">item.code</field>
            <field name="arch" type="xml">
                <form string="BOM">
                    <sheet>
                        <group>
                            <field name="item_id" readonly="1"/>
                            <field name="title"/>
                            <field name="Type"/>
                            <field name="Type_of_finish"/>
                            <field name="Width"/>
                            <field name="Length"/>
                            <field name="Height"/>
                            <field name="Thick"/>
                            <field name="Quantity"/>
                            <field name="Unit"/>
                        </group>
                        <notebook>
                            <page string="Item List">
                                <field name="sub_ids" widget="one2many_list">
                                    <tree editable="bottom">
                                        <field name="title"/>
                                        <field name="Width"/>
                                        <field name="Length"/>
                                        <field name="Height"/>
                                        <field name="Thick"/>
                                        <field name="Quantity"/>
                                        <field name="Unit"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--action of the item code menu-->
        <record id="action_item_code" model="ir.actions.act_window">
            <field name="name">Item Code</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">item.code</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new bill of quantity !
              </p>
            </field>
        </record>

     <!--action of the item code menu-->
        <record id="action_item_number" model="ir.actions.act_window">
            <field name="name">Item Number</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">item.number</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new item number !
              </p>
            </field>
        </record>

        <!--action of the drawing menu-->
        <record id="action_drawing" model="ir.actions.act_window">
            <field name="name">Drawings</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">construction.drawing</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new bill of quantity !
              </p>
            </field>
        </record>

        <record id="item_type_edit" model="ir.ui.view">
            <field name="name">project.item.type.form</field>
            <field name="model">project.item.type</field>
            <field name="arch" type="xml">
                <form string="Item Stage">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="mail_template_id"/>
                                <field name="rating_template_id" groups="project.group_project_rating"/>
                                <field name="auto_validation_kanban_state" attrs="{'invisible': [('rating_template_id','=', False)]}" groups="project.group_project_rating"/>
                            </group>
                            <group>
                                <field name="fold"/>
                                <field name="project_ids" widget="many2many_tags" groups="base.group_no_one"/>
                                <field name="sequence" groups="base.group_no_one"/>
                            </group>
                        </group>
                        <group string="Stage Description and Tooltips">
                            <p class="text-muted" colspan="2">
                                At each stage employees can block or make task/issue ready for next stage.
                                You can define here labels that will be displayed for the state instead
                                of the default labels.
                            </p>
                            <label for="legend_normal" string=" " class="o_status oe_project_kanban_legend"
                                title="Task in progress. Click to block or set as done."
                                aria-label="Task in progress. Click to block or set as done." role="img"/>
                            <field name="legend_normal" nolabel="1"/>
                            <label for="legend_blocked" string=" " class="o_status o_status_red oe_project_kanban_legend"
                                title="Task is blocked. Click to unblock or set as done."
                                aria-label="Task is blocked. Click to unblock or set as done." role="img"/>
                            <field name="legend_blocked" nolabel="1"/>
                            <label for="legend_done" string=" " class="o_status o_status_green oe_project_kanban_legend"
                                title="This step is done. Click to block or set in progress."
                                aria-label="This step is done. Click to block or set in progress." role="img"/>
                            <field name="legend_done" nolabel="1"/>

                            <p class="text-muted" colspan="2">
                                You can also give a tooltip about the use of the stars available in the kanban and form views.
                            </p>
                            <label for="legend_priority" string=" " class="fa fa-star fa-lg o_star_on oe_project_kanban_legend" aria-label="Legend priority" title="Legend priority" role="img"/>
                            <field name="legend_priority" nolabel="1"/>

                            <p class="text-muted" colspan="2">
                                You can also add a description to help your coworkers understand the meaning and purpose of the stage.
                            </p>
                            <field name="description" placeholder="Add a description..." nolabel="1" colspan="2"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="open_item_type_form" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">project.item.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new stage in the task pipeline
              </p><p>
                Define the steps that will be used in the project from the
                creation of the task, up to the closing of the task or issue.
                You will use these stages in order to track the progress in
                solving a task or an issue.
              </p>
            </field>
        </record>


        <record id="item_type_tree" model="ir.ui.view">
            <field name="name">project.item.type.tree</field>
            <field name="model">project.item.type</field>
            <field name="arch" type="xml">
                <tree string="Item Stage">
                    <field name="sequence" widget="handle" groups="base.group_no_one"/>
                    <field name="name"/>
                    <field name="fold"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <!-- drawing menu-->
        <menuitem id="construction_drawing" name="Drawing Service"  action="action_drawing" sequence="1"/>
        <menuitem id="item_number" name="Items"  action="action_item_number" parent="construction_drawing" sequence="1"/>
        <menuitem action="open_item_type_form" id="menu_project_item_project" name="Stages" parent="construction_drawing" sequence="3" groups="base.group_no_one"/>


</odoo>
